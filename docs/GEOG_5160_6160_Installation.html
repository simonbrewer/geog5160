<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Simon Brewer">
<meta name="dcterms.date" content="2025-01-09">

<title>GEOG 5160 6160 Installation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#before-starting" id="toc-before-starting" class="nav-link" data-scroll-target="#before-starting">Before starting</a></li>
  <li><a href="#introduction-to-python" id="toc-introduction-to-python" class="nav-link" data-scroll-target="#introduction-to-python">Introduction to Python</a>
  <ul class="collapse">
  <li><a href="#installing-python" id="toc-installing-python" class="nav-link" data-scroll-target="#installing-python">Installing Python</a></li>
  <li><a href="#using-conda" id="toc-using-conda" class="nav-link" data-scroll-target="#using-conda">Using conda</a>
  <ul class="collapse">
  <li><a href="#windows" id="toc-windows" class="nav-link" data-scroll-target="#windows">Windows</a></li>
  <li><a href="#mac-osx" id="toc-mac-osx" class="nav-link" data-scroll-target="#mac-osx">Mac OSX</a></li>
  <li><a href="#linux" id="toc-linux" class="nav-link" data-scroll-target="#linux">Linux</a></li>
  </ul></li>
  <li><a href="#changing-directories" id="toc-changing-directories" class="nav-link" data-scroll-target="#changing-directories">Changing directories</a>
  <ul class="collapse">
  <li><a href="#windows-1" id="toc-windows-1" class="nav-link" data-scroll-target="#windows-1">Windows</a></li>
  <li><a href="#max-osx" id="toc-max-osx" class="nav-link" data-scroll-target="#max-osx">Max OSX</a></li>
  <li><a href="#linux-1" id="toc-linux-1" class="nav-link" data-scroll-target="#linux-1">Linux</a></li>
  </ul></li>
  <li><a href="#conda-environments" id="toc-conda-environments" class="nav-link" data-scroll-target="#conda-environments">conda environments</a>
  <ul class="collapse">
  <li><a href="#installing-packages" id="toc-installing-packages" class="nav-link" data-scroll-target="#installing-packages">Installing packages</a></li>
  <li><a href="#jupyter-notebooks" id="toc-jupyter-notebooks" class="nav-link" data-scroll-target="#jupyter-notebooks">jupyter notebooks</a></li>
  </ul></li>
  <li><a href="#visual-studio-code" id="toc-visual-studio-code" class="nav-link" data-scroll-target="#visual-studio-code">Visual Studio Code</a></li>
  </ul></li>
  <li><a href="#introduction-to-r" id="toc-introduction-to-r" class="nav-link" data-scroll-target="#introduction-to-r">Introduction to R</a>
  <ul class="collapse">
  <li><a href="#installing-r" id="toc-installing-r" class="nav-link" data-scroll-target="#installing-r">Installing R</a>
  <ul class="collapse">
  <li><a href="#windows-2" id="toc-windows-2" class="nav-link" data-scroll-target="#windows-2">Windows</a></li>
  <li><a href="#mac" id="toc-mac" class="nav-link" data-scroll-target="#mac">Mac</a></li>
  <li><a href="#linux-2" id="toc-linux-2" class="nav-link" data-scroll-target="#linux-2">Linux</a></li>
  </ul></li>
  <li><a href="#r-packages" id="toc-r-packages" class="nav-link" data-scroll-target="#r-packages">R packages</a>
  <ul class="collapse">
  <li><a href="#installing-packages-1" id="toc-installing-packages-1" class="nav-link" data-scroll-target="#installing-packages-1">Installing packages</a></li>
  <li><a href="#using-packages" id="toc-using-packages" class="nav-link" data-scroll-target="#using-packages">Using packages</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">GEOG 5160 6160 Installation</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Simon Brewer <a href="mailto:simon.brewer@ess.utah.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Utah
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 9, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This document walks through installing and setting up R and Python. You should only need one of these for these class - I’d suggest using whichever you are most comfortable with. If you have any questions about which to choose, please ask me.</p>
</section>
<section id="before-starting" class="level1">
<h1>Before starting</h1>
<p>For this class, the labs will assume that you have your files organized according to the following structure:</p>
<pre><code>+-- geog5160
|   +-- datafiles
|   +-- lab01
|   +-- lab02
|   +-- lab03
...
|   +-- lab11</code></pre>
<p>To do this, go to your <code>Documents</code> folder, and create a new folder called <code>geog5160</code>. In this now create two new folders, one called <code>datafiles</code> (where we will store all the data used across all labs and one called <code>lab01</code>, which we will use for today’s lab.</p>
<p>Now download the <em>penguins.csv</em> file from Canvas and move this to the <code>datafiles</code> subfolder. Download the notebook and move this to your <code>lab01</code> folder.</p>
</section>
<section id="introduction-to-python" class="level1">
<h1>Introduction to Python</h1>
<p>Python is a high level programming language, designed for handling data (rather than software development). It is an interpreted language, which allows you to write relatively straightforward code that is then compiled in order to be run. This means that the code you write can be easily transferred between computers and operating systems, and you can just let the Python interpreter on the computer do all the work for you. In contrast to other programming languages it is dynamically typed, so you don’t need to track and declare all your variables, which generally means that it is easier to set up and run Python code than most low-level languages (e.g.&nbsp;c++), but with a higher risk of encountering problems with the variables you use (although these are pretty rare).</p>
<p>Python also has a large number of add-on <a href="https://wiki.Python.org/moin/UsefulModules">packages</a> that extend the basic function, and we’ll be using several of these for machine learning. Today, we’ll just use a couple of these for data manipulation and plotting.</p>
<section id="installing-python" class="level2">
<h2 class="anchored" data-anchor-id="installing-python">Installing Python</h2>
<p>There are two commonly used versions of Python: 2.7 and 3. Version 3 was released in 2008 and there has been a gradual transition to only using 3 (support for 2.x was stopped in 2020). In this class, we will only use Python 3. There are several <a href="https://wiki.Python.org/moin/PythonDistributions">packaged distributions</a> of Python that come with additional utilities. I would recommend using miniconda (these labs were written using this). Instructions for installing miniconda can be found <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/index.html#">here</a>. Make sure you install version 3.8 (or higher) and that you are installing the 64bit version.</p>
</section>
<section id="using-conda" class="level2">
<h2 class="anchored" data-anchor-id="using-conda">Using conda</h2>
<section id="windows" class="level3">
<h3 class="anchored" data-anchor-id="windows">Windows</h3>
<p>In windows, you can run the conda version of Python by going to the [Start Menu] &gt; [Anaconda (64-bit)] &gt; [Anaconda prompt]. This will launch a new terminal window, and if conda has been correctly installed you should see the following prompt:</p>
<pre><code>(base) C:\Users\username&gt;</code></pre>
</section>
<section id="mac-osx" class="level3">
<h3 class="anchored" data-anchor-id="mac-osx">Mac OSX</h3>
<p>Open any terminal. If conda has been correctly installed, you should see the following prompt</p>
<pre><code>(base) username:</code></pre>
</section>
<section id="linux" class="level3">
<h3 class="anchored" data-anchor-id="linux">Linux</h3>
<p>Open any terminal. If conda has been correctly installed, you should see the following prompt</p>
<pre><code>(base) username:</code></pre>
</section>
</section>
<section id="changing-directories" class="level2">
<h2 class="anchored" data-anchor-id="changing-directories">Changing directories</h2>
<p>In order to access the files, you’ll need to change directory in your terminal to the <code>lab01</code> folder you made earlier using the <code>cd</code> command. If you know the full path to the folder, then simply enter:</p>
<pre><code>cd /full/path/to/folder</code></pre>
<p>Once you’ve successfully changed directories, check that the notebook file is in your folder you have changed to by type <code>ls</code> to list the files.</p>
<section id="windows-1" class="level3">
<h3 class="anchored" data-anchor-id="windows-1">Windows</h3>
<p>Finding this path can be challenging on Windows, but the easiest was is to find the folder in Windows Explorer, right click on it and go to ‘Properties’. If you’ve created this in your Documents folder, the path will be something like <code>C:/Users/username/Documents/geog5160/lab01</code>.</p>
</section>
<section id="max-osx" class="level3">
<h3 class="anchored" data-anchor-id="max-osx">Max OSX</h3>
<p>On a Mac, you can find the path to a folder in the Finder window, by clicking on [View] &gt; [Show Path Bar]. If you’ve created this in your Documents folder, the path will be something like <code>/Users/username/Documents/geog5160/lab01</code>.</p>
</section>
<section id="linux-1" class="level3">
<h3 class="anchored" data-anchor-id="linux-1">Linux</h3>
<p>On a Linux system, the folder will be somewhere in your home directory. If you’ve created this in your Documents folder, the path will be something like <code>/home/username/Documents/geog5160/lab01</code>.</p>
</section>
</section>
<section id="conda-environments" class="level2">
<h2 class="anchored" data-anchor-id="conda-environments">conda environments</h2>
<p>One of the key features of conda is the use of environments. Each environment represents an isolated Python session, and so can be set up differently. This can help to avoid conflicts between add-on packages; you can create an environment for a particular type of analysis or data processing and only install the packages that you actually need. If conflicts arise, it is then easy to delete the environment and try to set it up again, all without impacting the base install of Python. The default environment is <code>base</code> (hence the <code>(base)</code> shown before the prompt). In general, you should only install packages here if you are likely to use them a lot. Packages that are specific to a given project should only be installed in that environment.</p>
<p>To create a new environment, simply type</p>
<pre><code>conda create -n new-env</code></pre>
<p>Python may ask you about the installation location for this environment, just accept the default. The environment will be set up then made available for use. Note that this only creates the environment, but you are still in the <code>base</code> environment. To change to <code>new-env</code>, type</p>
<pre><code>conda activate new-env</code></pre>
<p>Any you should see the prompt change from <code>(base)</code> to <code>(new-env)</code>. If you want to see a list of all the available environments (the current one will be listed with a <code>*</code>):</p>
<pre><code>conda env list</code></pre>
<p>You can stop your current environment return to the <code>base</code> environment:</p>
<pre><code>conda deactivate</code></pre>
<p>And environments can be deleted as follows:</p>
<pre><code>conda env remove -n new-env</code></pre>
<p>Now create an environment for class work (called <code>geog5160</code>)</p>
<pre><code>conda create -n geog5160
conda activate geog5160</code></pre>
<section id="installing-packages" class="level3">
<h3 class="anchored" data-anchor-id="installing-packages">Installing packages</h3>
<p>The <code>conda</code> command can also be used to install packages. To demonstrate this, we’ll start by installing the Jupyter Noteback package. This provides an interactive framework for testing and running Python code through your browser. Go to your terminal and enter the following code:</p>
<pre><code>conda install -c conda-forge notebook</code></pre>
<p>And press [y] to install all the supplementary packages. This will install <code>notebook</code> from the <code>conda-forge</code> repository or channel. There are several channels that host these packages, and <code>conda</code> uses anaconda.com by default. If your package is hosted elsewhere you need to specify this with the <code>-c</code> argument. The best way to find out where a particular package is held is by googling <code>conda install packagename</code> and following the links. Once you run this command, conda will check your local environment against the remote one, and download the necessary files to install the notebook (this includes any dependencies). Once you see the following three lines, the installation is complete:</p>
<pre><code>  Preparing transaction: done
  Verifying transaction: done
  Executing transaction: done</code></pre>
<p>Now we’ll install the <code>pandas</code> package to help with data manipulation and the <code>matplot</code> and <code>seaborn</code> packages for making simple plots:</p>
<pre><code>conda install pandas
conda install matplotlib
conda install seaborn</code></pre>
<p>You will likely be prompted to install some supplementary packages; just press [y] to continue and install these.</p>
</section>
<section id="jupyter-notebooks" class="level3">
<h3 class="anchored" data-anchor-id="jupyter-notebooks">jupyter notebooks</h3>
<p>For the labs in the class, the Python code will be provided as jupyter notebooks. These are interactive html pages, that contain code and the output from that code, and are a convenient way to keep your Python work organized and test new ideas. To open one of these, you first need to start the notebook server:</p>
<pre><code>jupyter notebook</code></pre>
<p>This will launch a new page in your web browser with a list of the files that are available in your current directory.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/notebook01.png" class="img-fluid figure-img"></p>
<figcaption>notebook Interface</figcaption>
</figure>
</div>
<p>Clicking on any of these will then open the notebook on a new browser page. Or you can open a new notebook by clicking on the [New] button in the top right. A notebook consists of a set of <em>cells</em>, blocks of code or text. Each cell has a set type: generally either code or markdown. Markdown cells are used for descriptive text, and can be formatted using basic markdown tags. Code cells are where you enter your Python code. Once you have entered your code, you can then click the [Run] button to run it, and any output will appear below the cell:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/notebook02.png" class="img-fluid figure-img"></p>
<figcaption>Code cells</figcaption>
</figure>
</div>
<p>At the top of the page there are a set of menus and actions buttons. The arrows allow you to move through the available cells, and the [+] button adds a new cell below your current position. The [Cell] menu has a lot of options for changing the cell type and for running different parts of the notebook (e.g.&nbsp;run all the cells above your current position).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/notebook03.png" class="img-fluid figure-img"></p>
<figcaption>Menu bar</figcaption>
</figure>
</div>
<p>If you’ve got this far, we’ll switch to the jupyter notebook for the remainder of this lab. If you haven’t used these notebooks before, it’s probably worth spending a little time working with a new one at some point to get used to navigating through them.</p>
</section>
</section>
<section id="visual-studio-code" class="level2">
<h2 class="anchored" data-anchor-id="visual-studio-code">Visual Studio Code</h2>
<p>An alternative (but recommended) interface for Python programming is Microsoft’s Visual Studio Code (VSCode). This can be downloaded for your operating system <a href="https://code.visualstudio.com/download">here</a> for free. Once installed, you’ll need to install the Python language support extension from the Extensions tab (click on the icon with four squares on the far left panel and search for Python).</p>
<p>Once this is installed, you should be able to open and create notebooks as you would with jupyter. These need to have a *.ipynb extension to be recognized as notebooks. Once opened, you can use the button in the top-left (labelled ’Select kernel) to use a given Conda environment. Make sure you set this to the environment you created for the class. If you have any trouble finding your Conda environments, there is a good guide to troubleshoot this <a href="https://code.visualstudio.com/docs/python/python-tutorial">here</a>.</p>
</section>
</section>
<section id="introduction-to-r" class="level1">
<h1>Introduction to R</h1>
<p>R is a high level programming language, principally designed for statstical analysis and modeling. It is an interpreted language, which allows you to write relatively straightforward code that is then compiled in order to be run. This means that the code you write can be easily transferred between computers and operating systems, and you can just let the R interpreter on the computer do all the work for you. In contrast to other programming languages it is dynamically typed, so you don’t need to track and declare all your variables, which generally means that it is easier to set up and run Python code than most low-level languages (e.g.&nbsp;c++), but with a higher risk of encountering problems with the variables you use (although these are pretty rare).</p>
<p>R also has a large number of add-on <a href="https://cran.r-project.org/web/packages/">packages</a> that extend the basic function, and we’ll be using several of these for machine learning. Today, we’ll just use a couple of these for data manipulation and plotting.</p>
<section id="installing-r" class="level2">
<h2 class="anchored" data-anchor-id="installing-r">Installing R</h2>
<p>R is available through the web page of <a href="https://cran.r-project.org">The Comprehensive R Archive Network</a>. At the top of this webpage, you will find three three links for downloading R depending on your operating system: Windows, Mac, or Linux.</p>
<section id="windows-2" class="level3">
<h3 class="anchored" data-anchor-id="windows-2">Windows</h3>
<p>To install R on Windows, click the “Download R for Windows” link, then click “base”. On the next page, the first link should allow you to download the latest version of R. Run the program that this downloads and step through the installation wizard that appears. The wizard will install R into your program files folders and place a shortcut in your Start menu. Note that you’ll need to have all of the appropriate administration privileges to install new software on your machine.</p>
</section>
<section id="mac" class="level3">
<h3 class="anchored" data-anchor-id="mac">Mac</h3>
<p>To install R on a Mac, click the “Download R for Mac” link, then download the package link (e.g.&nbsp;<code>R-4.4.0.*.pkg</code>). You’ll see a choice of two package. The first (<code>arm64</code>) is for the newer Macs with the M1/M2/M3 chips and the second (<code>x86_64</code>) is for the older intel-based Macs. If you’re not sure which one to choose go to the Apple menu (top left) and click on <code>About This Mac</code> to see your chip. Once this has downloaded, click on the file to run the installer. There are some options during the installation, but I’d recommend using the defaults for these. If your computer requires a password before installing new programs, you’ll need it here.</p>
</section>
<section id="linux-2" class="level3">
<h3 class="anchored" data-anchor-id="linux-2">Linux</h3>
<p>R comes pre-installed on many Linux systems, but is often an older version, and you’ll likely want to update this. Click on the “Download R for Linux.”, which will take you to a new page giving options for some of the more widely used Linux distros: Debian, Redhat, SUSE, and Ubuntu. Clicking on any of these will take you to a new page with detailed installation instructions for that system. Note that you can also download the source code from the first page and compile it yourself. This is relatively straightforward on most Unix-type operating systems. ## RStudio</p>
<p>While R provides the computational engine for all the programming and analysis that you will be doing, its user interface is fairly basic. There have been several attempts to create a better interface; RStudio is probably the most widely used of these. It is designed to provide some extra tools and help in using R, and provides easier access to help documentation. Also, the RStudio interface looks the same for Windows, Mac OS, and Linux, which makes writing these labs easier.</p>
<p>You can download RStudio for free from the <a href="https://www.rstudio.com">RStudio website</a>. Click on the ‘Download’ link under RStudio Desktop, and then choose the right download for your operating system. Once you’ve installed RStudio, you can open it like any other program on your computer—usually by clicking an icon on your desktop.</p>
</section>
</section>
<section id="r-packages" class="level2">
<h2 class="anchored" data-anchor-id="r-packages">R packages</h2>
<p>Packages that are installed are kept in the R library directory, usually buried away in the computer system files. However, even when installed, a package and its functions are not available until it has been <em>loaded</em> into the R workspace. Once this is done you can use it’s functions, as you would those in the base version.</p>
<p>If you close R, the packages are cleared from the workspace. Upon restarting R, you will need to reload any packages you were using. You do <strong>not</strong> need to reinstall the package, only reload it.</p>
<section id="installing-packages-1" class="level3">
<h3 class="anchored" data-anchor-id="installing-packages-1">Installing packages</h3>
<p>Packages can be installed in two ways:</p>
<ul>
<li>Use the function <code>install.packages()</code> from the console with the name of the package you wish to install</li>
<li>Go to the ‘Packages’ menu and select ‘Install packages..’</li>
<li>In RStudio, go to the ‘Tools’ menu and select ‘Install packages..’</li>
</ul>
</section>
<section id="using-packages" class="level3">
<h3 class="anchored" data-anchor-id="using-packages">Using packages</h3>
<p>There are several ways to use a package once it is installed:</p>
<ul>
<li>The command <code>library()</code> will load a package into the R workspace from the console (or from a script)</li>
<li>In the basic version of R, using the menu ‘Packages &gt; Load package’ brings up a window that allows you to load installed packages by double clicking on the name</li>
<li>In RStudio, the ‘Packages’ tab in the bottom right panel does the same, bringing up a list of available packages.</li>
</ul>
<p>For these last options, clicking in the box next to a package name will load the package, and clicking on the package name will bring up the associated help page.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>